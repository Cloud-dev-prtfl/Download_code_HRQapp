{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard | AI Exam Generator{% endblock %}

{% block extra_css %}
<style>
    /* Dashboard specific layout */
    .dashboard-wrapper {
        padding: 2rem;
        max-width: 1400px;
        margin: 0 auto;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2.5rem;
    }

    .stat-card {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        transition: transform 0.2s;
        position: relative;
        overflow: hidden;
    }
    .stat-card:hover { transform: translateY(-2px); border-color: #4f46e5; }

    .stat-title { color: #6b7280; font-size: 0.95rem; font-weight: 500; margin-bottom: 0.5rem; }
    .stat-value { font-size: 2.5rem; font-weight: 700; color: #111827; margin-bottom: 0.5rem; line-height: 1; }
    .stat-trend { font-size: 0.875rem; font-weight: 500; color: #10b981; } /* Green for positive */
    
    /* Activity Feed */
    .feed-container {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .feed-header { font-size: 1.25rem; font-weight: 700; color: #111827; margin-bottom: 1.5rem; }
    
    .feed-item {
        display: flex;
        gap: 1rem;
        padding: 1rem 0;
        border-bottom: 1px solid #f3f4f6;
    }
    .feed-item:last-child { border-bottom: none; }
    
    .feed-icon {
        width: 40px; height: 40px;
        background: #f3f4f6;
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-size: 1.25rem;
        flex-shrink: 0;
    }
    .feed-content h4 { font-size: 1rem; font-weight: 600; color: #1f2937; margin: 0 0 0.25rem 0; }
    .feed-meta { font-size: 0.85rem; color: #6b7280; }
    .feed-empty { text-align: center; color: #9ca3af; font-style: italic; padding: 2rem; }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-wrapper">
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-title">Assessments Created</div>
            <div class="stat-value">{{ assessments_total }}</div>
            <div class="stat-trend">+{{ assessments_recent }} this week</div>
        </div>

        <div class="stat-card">
            <div class="stat-title">Assign to Candidates</div>
            <div class="stat-value">{{ assignments_total }}</div>
            <div class="stat-trend">+{{ assignments_recent }} this week</div>
        </div>

        <div class="stat-card">
            <div class="stat-title">Total Candidates</div>
            <div class="stat-value">{{ total_candidates }}</div>
            <div class="stat-trend" style="color: #4f46e5;">Registered Users</div>
        </div>

        <div class="stat-card">
            <div class="stat-title">AI Agents Status</div>
            <div class="stat-value" style="color: {{ ai_status_color }}; font-size: 1.8rem;">
                {{ ai_status }}
            </div>
            {% if ai_msg %}
            <div class="stat-trend" style="color: #6b7280;">{{ ai_msg }}</div>
            {% endif %}
        </div>
    </div>

    <div class="feed-container">
        <h3 class="feed-header">Recent Activity</h3>
        
        {% if activities %}
            {% for item in activities %}
            <div class="feed-item">
                <div class="feed-icon">{{ item.icon }}</div>
                <div class="feed-content">
                    <h4>{{ item.title }}</h4>
                    <div class="feed-meta">
                        By <span style="font-weight: 600; color: #4b5563;">{{ item.user }}</span> â€¢ {{ item.time|date:"M d, H:i" }}
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="feed-empty">No recent activity to display.</div>
        {% endif %}
    </div>

</div>
{% endblock %}